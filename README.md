Το Link του παιχνιδιού είναι: https://users.iee.ihu.gr/~iee2019079/ADISE23_WizardCardGame/index.php/

![wizard](https://github.com/iee-ihu-gr-course1941/ADISE23_WizardCardGame/assets/57770693/e847f688-f9e9-451e-b795-39560aca1d4b)

## Table of Contents
- [Περιγραφή](#Περιγραφή)
- [Κανόνες](#Κανόνες)
- [Υλοποίηση](#Υλοποίηση)
- [Αποτίμηση](#Αποτίμηση)

## Περιγραφή

Πρόκειται για ένα επιτραπέζιο παιχνίδι καρτών από τον Ken Fisher, 1984 Καναδάς. Υπάρχουν 4 φυλές (13 ${\color{blue}Άνθρωποι}$, 13 ${\color{red}Νάνοι}$, 13 ${\color{yellow}Γίγαντες}$, 13 ${\color{green}Ξωτικά}$), 4 Μάγοι (Υψηλότερο χαρτί) και 4 Γελωτοποίοι (Μπαλαντέρ), συνολικά 60 κάρτες. Οι μάγοι και οι γελωτοποίοι δεν έχουν χρώμα.

## Κανόνες

Ο κάθε παίκτης ανταγωνίζεται τους υπόλοιπους, με σκοπό να κερδίσει τις περισσότερες παρτίδες σε κάθε γύρα (ο αριθμός των γυρών καθορίζεται από το πλήθος των παικτών). <br>
Για τη **ν-οστή** γύρα παίζονται **ν παρτίδες**, ο κάθε παίκτης παίρνει **ν κάρτες** και ορίζεται από μια άλλη κάρτα το ατού (πιο δυνατό χρώμα) της γύρας<sup>1</sup>. Στην τελευταία γύρα δεν υπάρχει ατού. <br>
Πριν ξεκινήσει η γύρα και αφού έχουν δει όλοι οι παίκτες τα φύλλα τους και το ατού, στοιχηματίζουν πόσες παρτίδες **k** θα πάρουν. <br>
Εάν πέσουν μέσα στο i=**k**, πέρνουν +10 για όσες είπαν και +20. Εάν δηλώσαν **k** = 0, παίρνουν +20. Τέλος, αν κέρδισαν περισσότερες ή λιγότερες από **k**, -10 για κάθε παιχνίδι. <br>
Συνοπτικά ο τύπος είναι ο εξής: <br>
$` y_{n} = y_{n-1} + 10k + 20 `$ , για i=**k**. , <br>
$` y_{n} = y_{n-1} - 10|i-k| `$ , για i≠**k**. <br>
Κατά τη διάρκεια μιας παρτίδας, ο πρώτος παίκτης θα πετάξει ένα φύλλο, οι υπόλοιποι **αναγκστικά** ακολουθούν το χρώμα (φυλή)<sup>2</sup>, το μεγαλύτερο φύλλο κερδίζει<sup>3</sup>. <br>
Ο νικητής της παρτίδας, ξεκινά πρώτος στην επόμενη. <br>
Στο τέλος της γύρας βγαίνουν οι κερδισμένοι και (αν υπάρχουν) χαμένοι. <br>
<sup>1</sup> Εάν βγει μάγος το ατού, το ατού επιλέγεται ξανά στην τύχη. Αν βγει γελωτοποιός, δεν υπάρχει ατού για αυτή τη γύρα. <br>
<sup>2</sup> Εάν κάποιος παίκτης δεν έχει το χρώμα που έπαιξε ο πρώτος, απλώς παίζει κάποιο άλλο. Εάν κάποιος παίκτης έχει μάγο ή γελωτοποιό, μπορεί άμα θέλει να μη πετάξει το χρώμα του 1ου και να πετάξει μάγο/γελωτοποιό. Σε περίπτωση που ο πρώτος έχει πετάξει μάγο ή γελωτοποιό, οι υπόλοιποι παίκτες πετάνε ό,τι θέλουν ή ο αμέσως επόμενος επιβάλλει το χρώμα στους άλλους αντίστοιχα. <br>
<sup>3</sup> Η ιεραρχία είναι 1ος μάγος που θα παιχτεί -> Μεγαλύτερο ατού φύλλο -> Μεγαλύτερο χρώμα παρτίδας φύλλο.<br>
[Περιγραφή παιχνιδιού από την Κάισσα](https://youtu.be/gYILYQgS5_o?si=mdzMl9aZ71mZYcaT&t=59)
## Υλοποίηση

### SQL Tables
___
#### cards

|ΟΝΟΜΑ|ΠΕΡΙΓΡΑΦΗ|ΤΙΜΕΣ|
| ------------- |:-------------|:-----|
|Cid|To ID της κάρτας|1-60|
|Figure|Η "τιμή" της κάρτας|1-13, J, W|
|Class|Η φυλή/κλάση που έχει η κάρτα|Human, Elves, Dwarves, Giants|
|Pid*|Που βρίσκεται η κάρτα|0-6|

\*Εάν είναι 0 βρίσκεται στην τράπουλα, 5 έχει παιχτεί στο board, 6 είναι το ατού.
#### players

|ΟΝΟΜΑ|ΠΕΡΙΓΡΑΦΗ|ΤΙΜΕΣ|
|-------------|:-------------|:-----|
| Pid | To ID του παίκτη| 1,2,3,4 |
| Username | Η όνομα που έβαλε ο παίκτης | Varchar(50) |
| Token | Το token που αποδόθηκε στο παίκτη |Varchar(50) |
| Total_points | Οι συνολικοί πόντοι που συγκέντρωσε| Integer |
#### gamestate
|ΟΝΟΜΑ|ΠΕΡΙΓΡΑΦΗ|ΤΙΜΕΣ|
|-------------|:-------------|:-----|
| PlayOrder | Η σειρά των παικτών| 1,2,3,4 |
| Pid | To ID του παίκτη | 1,2,3,4 |
| Rounds | Ο τρέχων γύρος του παιχνιδιού | Integer |
| Bet | Τα tricks που δήλωσε ότι θα κερδίσει πριν ξεκινήσει το Round| Integer |
| Rounds_won | Πόσα tricks κερδίζει στον τρέχων γύρο | Integer |
| Card_played | Ποια κάρτα παίζει στο κάθε trick του γύρου | TINYINT |
| Master_Class | Ποιο class πρέπει να ακολουθούν οι παίκτες | Human, Elves, Dwarves, Giants, J, W |
| Trump_Class | Ποιο class είναι το ατού του γύρου | Human, Elves, Dwarves, Giants, J, W, None |
#### gamedetails

|ΟΝΟΜΑ|ΠΕΡΙΓΡΑΦΗ|ΤΙΜΕΣ|
|-------------|:-------------|:-----|
| Status | Η κατάσταση του παιχνιδιού| Not active, Waiting, Playing, Finished |
| Result | Ποιος παίκτης κέρδισε τελικά| P1,P2,P3,P4 |

### API functions
___
#### GET

|ΟΝΟΜΑ|ΠΕΡΙΓΡΑΦΗ|ΕΠΙΣΤΡΕΦΕΙ|
| ------------- |:-------------|:-----|
|GetPlayersHand|Επιστρέφει το χέρι του παίκτη|Cid, Figure, Class|
|GetTrumpClass|Επιστρέφει το ατού του γύρου|Class|
|GetBoard|Επιστρέφει ποιες κάρτες έπαιξε ο κάθε παίκτης|Pid, Cid, Figure, Class|
|GetUsernames|Επιστρέφει τα ονόμα των παικτών|Username|
##### POST

|ΟΝΟΜΑ|ΠΕΡΙΓΡΑΦΗ| ΜΕΤΑΒΛΗΤΗ  |EXITCODE |
| ------------- |:-------------|:-----|-----:|  
|AddPlayer|Επιστρέφει το χέρι του παίκτη|name|1, 2| 
|PlaceBet|Επιστρέφει το ατού του γύρου|bet|1, 2, 3|
|PlayCards|Επιστρέφει ποιες κάρτες έπαιξε ο κάθε παίκτης|c|1, 2, 3, 4| 
#### AddPlayer
|EXITCODE|ΜΗΝΥΜΑ|
|-------------|:-------------| 
|0|Player added|
|1|Max players|
|2|Token already exists|
#### PlaceBet
|EXITCODE|ΜΗΝΥΜΑ|
|-------------|:-------------| 
|0|Bet added|
|1|Advice: You will lose whatever happens.|
|2|Error: You already have placed your bet.|
|3|Error: Place a positive number.|
#### PlayCards
|EXITCODE|ΜΗΝΥΜΑ|
|-------------|:-------------| 
|0|Card played|
|1|Advice: Not your turn.|
|2|Error: Card not in player's hand!.|
|3|Error: Not the appropriate card, play same class!|
|4|Error: Wait for all players to place a bet!|
## Αποτίμηση

Ο κώδικας λειτουργεί ικανοποιητικά, εννοώντας ότι δουλεύει, ιδανικά θα ήθελα να προσθέσω ένα GUI, ώστε να μπορεί ο παίκτης να παίζει χωρίς να κοιτάζει συνεχώς τα Cids των καρτών.
Πέραν αυτού, κάτι ακόμα που σκοπεύω είναι να απλοποιήσω λίγο τους πίνακες του παιχνιδιού και να τσεκάρω το workflow εκ νέου έτσι ώστε να είναι, πιο robust.
